{
    "$schema": "https://raw.githubusercontent.com/TingPing/flatpak-manifest-schema/master/flatpak-manifest.schema",
    "app-id": "com.solvespace.SolveSpace",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "23.08",
    "sdk": "org.freedesktop.Sdk",
    "finish-args": [
        "--device=dri",
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland"
    ],
    "cleanup": [
        "/include",
        "/lib/cmake",
        "/lib/pkgconfig",
        "/share/aclocal",
        "/share/pkgconfig",
        "*.la"
    ],
    "command": "solvespace",
    "modules": [
        {
            "name": "mm-common",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/mm-common/1.0/mm-common-1.0.6.tar.xz",
                    "sha256": "b55c46037dbcdabc5cee3b389ea11cc3910adb68ebe883e9477847aa660862e7",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "mm-common",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/bin",
                "/share/doc",
                "/share/man",
                "/share/mm-common"
            ]
        },
        {
            "name": "sigc++",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/libsigc++/3.0/libsigc++-3.0.7.tar.xz",
                    "sha256": "bfbe91c0d094ea6bbc6cbd3909b7d98c6561eea8b6d9c0c25add906a6e83d733",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "libsigc++",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/sigc++-*"
            ]
        },
        {
            "name": "glibmm",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/glibmm/2.68/glibmm-2.68.2.tar.xz",
                    "sha256": "91e0a8618f7b82db4aaf2648932ea2bcfe626ad030068c18fa2d106fd838d8ad",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "glibmm",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/giomm-*",
                "/lib/glibmm-*",
                "/lib/libglibmm_generate_extra_defs-*.so*"
            ]
        },
        {
            "name": "cairomm",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false",
                "-Dbuild-tests=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/cairomm/1.15/cairomm-1.15.4.tar.xz",
                    "sha256": "4e5d0b0c6766b96f7a3b5ab5a1bc6a6c58fa52bd5ad1d4a33b5e1725f6df2bd2",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "cairomm",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/cairomm-*"
            ]
        },
        {
            "name": "pangomm",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false",
                "-Dbuild-tests=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/pangomm/2.50/pangomm-2.50.2.tar.xz",
                    "sha256": "e27ccc57a5f9a1aae9ea9a3569ca1c68b5768723bc5457def2c580ab5813d4b4",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "pangomm",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/pangomm-*"
            ]
        },
        {
            "name": "atkmm",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false",
                "-Dbuild-tests=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/atkmm/2.36/atkmm-2.36.3.tar.xz",
                    "sha256": "6ec264eaa0c4de0adb7202c600170bde9a7fbe4d466bfbe940eaf7faaa6a3d20",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "atkmm",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/atkmm-*"
            ]
        },
        {
            "name": "gtkmm",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-demos=false",
                "-Dbuild-tests=false"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/gtkmm/4.8/gtkmm-4.8.0.tar.xz",
                    "sha256": "c82786d46e2b07346b6397ca7f1929d952f4922fa5c9db3dee0215a2a4c6e6e6",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "gtkmm",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/gdkmm-*",
                "/lib/gtkmm-*"
            ]
        },
        {
            "name": "eigen",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.tar.gz",
                    "sha256": "8586084f71f9bde545ee7fa6d00288b264a2b7ac3607b974e54d13e7162c1c72",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 13751,
                        "stable-only": true,
                        "url-template": "https://gitlab.com/libeigen/eigen/-/archive/$version/eigen-$version.tar.gz"
                    }
                }
            ],
            "cleanup": [
                "*"
            ]
        },
        {
            "name": "libjson-c",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DBUILD_STATIC_LIBS=OFF",
                "-DENABLE_THREADING=ON"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://s3.amazonaws.com/json-c_releases/releases/json-c-0.16.tar.gz",
                    "sha256": "8e45ac8f96ec7791eaf3bb7ee50e9c2100bbbc87b8d0f1d030c5ba8a0288d96b",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1477,
                        "stable-only": true,
                        "url-template": "https://s3.amazonaws.com/json-c_releases/releases/json-c-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "solvespace",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DFLATPAK=ON",
                "-DENABLE_TESTS=OFF",
                "-DUSE_GTK4=ON"
            ],
            "build-options": {
                "env": {
                    "MESON_ARGS": "--wrap-mode=nofallback"
                }
            },
            "sources": [
                {
                    "type": "dir",
                    "path": "../.."
                }
            ],
            "cleanup": [
                "/lib/libslvs*.so*"
            ]
        }
    ]
}
